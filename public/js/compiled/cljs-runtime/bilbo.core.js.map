{"version":3,"sources":["bilbo/core.cljs"],"mappings":";;;;;AAOA,AAAKA,AAAU,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAACC;AAqBhB,AAAA,AAAAC,AAAMM;AAAN,AAAA,AAAAL,AAAAD;AAAAC,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAC,AAAA,AAAAD,AAAA,AAAA,AAAA,AAAA,AAAAE,AAAAC,AAAAH,AAAAA;AAAA,AAAAI,AAAAJ,AAAA,AAA8BM;AAA9B,AAAAF,AAAAJ,AAAA,AAAmCO;AAAnC,AACE,AAAMC,AAAI,AAACV,AAAOQ;AACZG,AAAI,AAAAC;AADV,AAGE;AAAA,AACE,AAAMG,AAAU,AAACC,AAAM,AAAA,AAAA,AAAAH,AAACI,AAAcP;AAAtC,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAG,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAC,AAIUL,AACYC,AACF,AAAA,AAAI,AAAA,AAAGK,AAAeA;AAN1C,AAQ0B,AAACG,AAAOR,AAAI,AAAA,AAAAI;AARtC,AAAA,AAAA,AAAA,AAAA,AAAA,AAW0C,AAAA,AAAAD,AAAGF,AAAWD;;;AAI9D,AAAA,AAAMS;AAAN,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAEQ,AAAA,AAAA,AAAAN,AAAQd,AAGb,AAAAqB,AAAA,AAAAC;AAAA,AAAA,AAAAC,AAAA,AAAA;AAAA,AAAA,AAAAD,AAAAA;;AAAA,AAAA,AAAAE,AAAA,AAAAC,AAAAH;AAAA,AAAA,AAAAE;AAAA,AAAA,AAAAF,AAAAE;AAAA,AAAA,AAAA,AAAAE,AAAAJ;AAAA,AAAAK,AAg5EgD,AAAAsB,AAAA3B;AAh5EhDM,AAAA,AAAAX,AAAAU;AAAAE,AAAA,AAAAC,AAAAF;AAAA,AAAA,AAAA,AAAA,AAAAG,AAAA;;AAAA,AAAA,AAAA,AAAAA,AAAAH;AAAA,AAAA,AAAAI,AAAAL,AAAAI,AAAMU;AAAN,AAAA,AAAA,AAAAR,AAAAJ,AAAA,AACGrB,AAAeiC;;AADlB,AAAA,AAAAV,AAAA;;;;AAAA;;;;;AAAA,AAAAG,AAAA,AAAAC,AAAAN,AAAA,AAAAO,AAAA,AAAAC,AAAAf;;AAAA,AAAAY,AAAA,AAAAC,AAAAN,AAAA;;;AAAA,AAAA,AAAAS,AAAAhB,AAAMmB;AAAN,AAAA,AAAAF,AAAA,AAAA,AAAAH,AAAA,AAAAI,AAAAlB,AACGd,AAAeiC;;;AADlB;;;;AAAA,AAAA;;AAAA,AAAA,AAAApB,AAAW,AAAAqB,AAAA,AAAA5B,AAAEd;AAAF,AAAA,AAAA0C,AAAAA,AAAA,AAAAA,AAAA;;;;AAGd,AAAA,AAAMC;AAAN,AACE,AAAA,AAACC,AAAoBxB,AACD,AAAA,AAAGyB;;AAEzB,AAAA,AAAeC;AAAf,AAIE,AAACH;;;AAEH,AAAA,AAAMI;AAAN,AAGE,AAAA,AAACC","names":["bilbo.core/app-state","reagent.core.atom","p__34188","map__34189","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply","cljs.core/hash-map","cljs.core.get","bilbo.core/note-component","text","creation-ts","val","md","js/module$node_modules$markdown_it$index","cljs.core/deref","p1__34187#","row-count","cljs.core/count","cljs.core/re-seq","cljs.core/reset!","bilbo.core/container","iter__4529__auto__","s__34192","cljs.core/LazySeq","temp__5735__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4527__auto__","size__4528__auto__","b__34194","cljs.core/chunk-buffer","i__34193","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__34191","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","note","fexpr__34195","bilbo.core/start","reagent.dom.render","js/document","bilbo.core/init","bilbo.core/stop","js/console.log","cljs.core/chunk-first"],"sourcesContent":["(ns bilbo.core\n  (:require [reagent.core :as r]\n            [reagent.dom :as reagent-dom]\n            [markdown-it :as markdown-it]))\n\n;; define your app data so that it doesn't get over-written on reload\n\n(def app-state (r/atom {:text \"Goodbye world!\"\n                        :notes [{:id 1 :creation-ts \"Sun 31/05/20\" :text \"This is note 1\"}\n                                {:id 2 :creation-ts \"Sat 30/05/20\" :text \"This is note 2\"}]}))\n\n;; (defn todo-input [{:keys [title on-save on-stop]}]\n;;   (let [val (r/atom title)\n;;         stop #(do (reset! val \"\")\n;;                   (if on-stop (on-stop)))\n;;         save #(let [v (-> @val str str/trim)]\n;;                 (if-not (empty? v) (on-save v))\n;;                 (stop))]\n;;     (fn [{:keys [id class placeholder]}]\n;;       [:input {:type \"text\" :value @val\n;;                :id id :class class :placeholder placeholder\n;;                :on-blur save\n;;                :on-change #(reset! val (-> % .-target .-value))\n;;                :on-key-down #(case (.-which %)\n;;                                13 (save)\n;;                                27 (stop)\n;;                                nil)}])))\n\n(defn note-component [{:keys [text creation-ts]}]\n  (let [val (r/atom text)\n        md  (markdown-it.)\n        ]\n    (fn []\n      (let [row-count (count (re-seq #\"\\n\" @val))]\n\n      [:div {:class \"shadow p-3 mb-5 bg-white rounded\"}\n       [:div.form-group\n        [:label creation-ts]\n        [:textarea {:value @val\n                    :rows (if (< row-count 5) 5 row-count )\n                    :class \"form-control\"\n                    :on-change #(reset! val (-> % .-target .-value))}]\n        ]\n\n       [:div {:dangerouslySetInnerHTML {:__html (. md render @val)}}]\n\n       ]))))\n\n(defn container []\n  [:div.container\n   [:h1 (:text @app-state)]\n   [:h4 \"Edit this and see it change!\"]\n\n   (for [note (@app-state :notes)]\n     [note-component note])])\n\n(defn start []\n  (reagent-dom/render [container]\n                      (. js/document (getElementById \"app\"))))\n\n(defn ^:export init []\n  ;; init is called ONCE when the page loads\n  ;; this is called in the index.html and must be exported\n  ;; so it is available even in :advanced release builds\n  (start))\n\n(defn stop []\n  ;; stop is called before any code is reloaded\n  ;; this is controlled by :before-load in the config\n  (js/console.log \"stop\"))\n"]}